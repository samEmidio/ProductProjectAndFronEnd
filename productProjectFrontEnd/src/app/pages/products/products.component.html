
<section class="jumbotron text-center">
    <div class="container">
        <h1 class="jumbotron-heading">E-COMMERCE PRODUCTS</h1>
        <p class="lead text-muted mb-0"></p>
    </div>
</section>
<div class="container">
    <div class="row">
        <div class="col">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="index.html">Products</a></li>
                    <li class="breadcrumb-item"><a href="category.html">Category</a></li>
                    
                </ol>
            </nav>
        </div>
    </div>
</div>
<div class="container">
    <div class="row">
        <div class="col-12 col-sm-3">
          <div class="card bg-light mb-3">
            <div class="card-header bg-success text-white text-uppercase">
                <button type="button" class="btn btn-success" data-toggle="modal" data-target="#productModal" data-whatever="@mdo">
                    <i class="fa fa-plus-square"></i>
                    New Product
                </button>
            </div>
        </div>

            <div class="card bg-light mb-3">
                <div class="card-header bg-primary text-white text-uppercase"> 
                    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#categoryModal" data-whatever="@mdo">
                        <i class="fa fa-plus-square"></i>
                        New Category
                    </button>
                </div>
                <ul class="list-group category_block" >
                    <li class="list-group-item" *ngFor="let item of categories">

                        <div style="width: 100%;display: flex;flex-direction: row;justify-content: space-between;align-items: center;">
                          {{item.name}}
                          <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#categoryUpdateModal" data-whatever="@mdo" (click)="selectCategory(item)">
                            <i class="fa fa-wrench"></i>
                          </button>
                        </div>

                        
                    </li>
            
                </ul>
            </div>
            
        </div>
        <div class="col" *ngIf="products.length != 0">
            <div class="row">
                <div class="col-12 col-md-6 col-lg-4" *ngFor="let item of products">
                    <div class="card">

                    
                      <div id="{{carouselName(item.id)}}" class="carousel slide" data-ride="carousel">
                        <ol class="carousel-indicators">
                          <li *ngFor="let images of item.pictures; let i = index" data-target="#{{carouselName(item.id)}}" data-slide-to="i" class="active" ></li>
                        </ol>
                        <div class="carousel-inner">
                         
                          <div class="{{activeImage(i)}}"  data-interval="2000" *ngFor="let images of item.pictures;let i = index">
                            <img src="https://localhost:5001/v1/image/{{images.path}}" height="300" width="300">
                          </div>
                        </div>
                        <a class="carousel-control-prev" href="#{{carouselName(item.id)}}" role="button" data-slide="prev">
                          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                          <span class="sr-only">Previous</span>
                        </a>
                        <a class="carousel-control-next" href="#{{carouselName(item.id)}}" role="button" data-slide="next">
                          <span class="carousel-control-next-icon" aria-hidden="true"></span>
                          <span class="sr-only">Next</span>
                        </a>
                      </div>
                      

                        
                        
                        <div style="width: 100%;background-color: #007BFF;text-align: center;">
                          <span style="color: white;font-weight: 500;">{{item.category.name}}</span>
                        </div>
                        <div class="card-body">
                            <h4 class="card-title"><a href="product.html" title="View Product">{{item.name}}</a></h4>
                            <p class="card-text">{{item.description}}</p>
                            <div class="row">
                                <div class="col">
                                    <p class="btn btn-danger btn-block">{{item.price}} $</p>
                                </div>
                                <div class="col">
                                  <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#productUpdateModal" data-whatever="@mdo" (click)="selectProduct(item)">
                                    <i class="fa fa-wrench"></i>
                                  </button>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
               
            </div>
        </div>
        <div *ngIf="products.length === 0" style="width: 70%;text-align: center;align-self: center;">
            <span>VocÃª ainda nao criou nenhum  produto</span>
        </div>
        
    </div>
</div>
<br>
<br>
<br>
<!-- Footer -->
<footer class="text-light">
    <div class="container">
        <div class="row">
            <div class="col-md-3 col-lg-4 col-xl-3">
                <h5>About</h5>
                <hr class="bg-white mb-2 mt-0 d-inline-block mx-auto w-25">
                <p class="mb-0">
                   E-commerce products
                </p>
            </div>

            <div class="col-md-2 col-lg-2 col-xl-2 mx-auto">
                <h5>Informations</h5>
                <hr class="bg-white mb-2 mt-0 d-inline-block mx-auto w-25">
                <ul class="list-unstyled">
                    <li><a href="">Link 1</a></li>
                    <li><a href="">Link 2</a></li>
                    <li><a href="">Link 3</a></li>
                    <li><a href="">Link 4</a></li>
                </ul>
            </div>

            <div class="col-md-3 col-lg-2 col-xl-2 mx-auto">
                <h5>Others links</h5>
                <hr class="bg-white mb-2 mt-0 d-inline-block mx-auto w-25">
                <ul class="list-unstyled">
                    <li><a href="">Link 1</a></li>
                    <li><a href="">Link 2</a></li>
                    <li><a href="">Link 3</a></li>
                    <li><a href="">Link 4</a></li>
                </ul>
            </div>

            <div class="col-md-4 col-lg-3 col-xl-3">
                <h5>Contact</h5>
                <hr class="bg-white mb-2 mt-0 d-inline-block mx-auto w-25">
                <ul class="list-unstyled">
                    <li><i class="fa fa-home mr-2"></i> My company</li>
                    <li><i class="fa fa-envelope mr-2"></i> email@example.com</li>
                    <li><i class="fa fa-phone mr-2"></i> + 55 12-99999-9999</li>
                    <li><i class="fa fa-print mr-2"></i> + 55 12-99999-9999</li>
                </ul>
            </div>
            <div class="col-12 copyright mt-3">
                <p class="float-left">
                    <a href="#">Back to top</a>
                </p>
               
            </div>
        </div>
    </div>
</footer>




<div class="modal fade" id="categoryModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">New Category</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <form>
            <div class="form-group">
              <label for="recipient-name" class="col-form-label">Category Name</label>
              <input type="text" class="form-control"  [(ngModel)] = "newCategory.name" name="name">
            </div>
            <div class="form-group">
              <label for="message-text" class="col-form-label">Category Description</label>
              <textarea class="form-control"  [(ngModel)] = "newCategory.description" name="description"></textarea>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary" data-dismiss="modal" (click)="addCategory()">Save Category</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="categoryUpdateModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Update Category</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <form>
            <div class="form-group">
              <label for="recipient-name" class="col-form-label">Category Name</label>
              <input type="text" class="form-control"  [(ngModel)] = "newCategoryUpdate.name" name="nameUpdate">
            </div>
            <div class="form-group">
              <label for="message-text" class="col-form-label">Category Description</label>
              <textarea class="form-control"  [(ngModel)] = "newCategoryUpdate.description" name="descriptionUpdate"></textarea>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-danger" data-dismiss="modal" (click)="deleteCategory()">Delete</button>
          <button type="button" class="btn btn-primary" data-dismiss="modal" (click)="updateCategory()">Save Category</button>
        </div>
      </div>
    </div>
  </div>















  <div class="modal fade" id="productModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">New Product</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <form>
            <div class="form-group">
              <label for="recipient-name" class="col-form-label">Product Name</label>
              <input type="text" class="form-control" name="name" [(ngModel)]="newProduct.name">
            </div>
            <div class="form-group">
              <label for="message-text" class="col-form-label">Product Description</label>
              <textarea class="form-control" id="message-text" name="description" [(ngModel)]="newProduct.description"></textarea>
            </div>

            <div class="form-group">
                <label for="exampleFormControlSelect1">Product Category</label>
                <select class="form-control" name="categoryId" [(ngModel)]="newProduct.categoryId">
                  <option *ngFor="let item of categories" [value]="item.id">{{item.name}}</option>
                </select>
              </div>

            <div class="form-group">
                <label for="recipient-name" class="col-form-label">Product Price</label>
                <input type="number" class="form-control" name="price" [(ngModel)]="newProduct.price">
            </div>

            <div class="form-group">
                <label for="recipient-name" class="col-form-label">Select the Pictures</label>
                <input type="file" class="form-control"  name="pictures" (change)="fileChangeEvent($event)" multiple>
            </div>
            

          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary" data-dismiss="modal" (click)="addProduct()">Save</button>
        </div>
      </div>
    </div>
  </div>



  <div class="modal fade" id="productUpdateModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">New Product</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <form>
            <div class="form-group">
              <label for="recipient-name" class="col-form-label">Product Name</label>
              <input type="text" class="form-control" name="name" [(ngModel)]="newProductUpdate.name">
            </div>
            <div class="form-group">
              <label for="message-text" class="col-form-label">Product Description</label>
              <textarea class="form-control" id="message-text" name="description" [(ngModel)]="newProductUpdate.description"></textarea>
            </div>

            <div class="form-group">
                <label for="exampleFormControlSelect1">Product Category</label>
                <select class="form-control" name="categoryId" [(ngModel)]="newProductUpdate.categoryId">
                  <option *ngFor="let item of categories" [value]="item.id">{{item.name}}</option>
                </select>
              </div>

            <div class="form-group">
                <label for="recipient-name" class="col-form-label">Product Price</label>
                <input type="number" class="form-control" name="price" [(ngModel)]="newProductUpdate.price">
            </div>

            <div class="form-group">
                <label for="recipient-name" class="col-form-label">Select the Pictures</label>
                <input type="file" class="form-control"  name="pictures" (change)="fileChangeEvent($event)" multiple>
            </div>
            

          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-danger" data-dismiss="modal" (click)="deleteProduct()">Delete</button>
          <button type="button" class="btn btn-primary" data-dismiss="modal" (click)="updateProduct()">Save</button>
        </div>
      </div>
    </div>
  </div>